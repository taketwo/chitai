<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chitai - Display</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans:ital,wght@0,400;0,600;1,400;1,600&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/web/styles.css" />
    <script src="/web/debug.js"></script>
    <script src="/web/websocket.js"></script>
    <script src="/web/display/display.js"></script>
    <script defer src="/web/vendor/alpine.min.js"></script>
  </head>
  <body class="display">
    <div x-data="displayApp()" class="app-wrapper">
      <div x-ref="status" class="status"></div>

      <div class="placeholder" :class="{ hidden: hasWords }"></div>

      <div class="container" :class="`orientation-${orientation}`">
        <div class="text-panel">
          <div
            id="textDisplay"
            :class="{
              'slide-out-vertical': slideState === 'out-vertical',
              'slide-in-vertical': slideState === 'in-vertical',
              'slide-out-horizontal': slideState === 'out-horizontal',
              'slide-in-horizontal': slideState === 'in-horizontal'
            }"
          >
            <template x-if="hasWords">
              <template x-for="(word, index) in words" :key="index">
                <div
                  class="word"
                  :class="{
                  read: !isCompleted && index < currentWordIndex,
                  current: !isCompleted && index === currentWordIndex,
                  future: !isCompleted && index > currentWordIndex,
                  dimmed: !isCompleted && ((index < currentWordIndex && dimReadWords) || (index > currentWordIndex && dimFutureWords))
                }"
                >
                  <template x-if="showSyllables && syllables[index]">
                    <template
                      x-for="(syllable, sylIndex) in syllables[index]"
                      :key="sylIndex"
                    >
                      <span
                        class="syllable"
                        :class="{ 'syllable-with-separator': sylIndex < syllables[index].length - 1 }"
                        x-text="syllable"
                      ></span>
                    </template>
                  </template>
                  <template x-if="!showSyllables || !syllables[index]">
                    <span x-text="word"></span>
                  </template>
                </div>
              </template>
            </template>
          </div>
        </div>

        <div id="illustrationDisplay" :class="{ visible: illustrationVisible }">
          <template x-if="illustrationUrl">
            <img :src="illustrationUrl" alt="Illustration" />
          </template>
        </div>
      </div>
    </div>
  </body>
</html>
